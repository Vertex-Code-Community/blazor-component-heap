@using Bch.Components.Select
<div id="@Id" class="bch-component bch-datepicker-list-month @GetThemeCssClass()">
    <div class="bch-datepicker-button-of-open-years">
        <div>
            <BchSelect TItem="Year"
                       ContentId="@YearsSelectContentId"
                       Options="_years"
                       ContentHeight="224"
                       ItemHeight="34"
                       Width="70"
                       ScrollToSelected="true"
                       CssClass="bch-calendar-year-select bch-calendar-year-select-modal"
                       OptionNamePredicate="x => x.Number.ToString()"
                       DefaultValue="_selectedYear"
                       SelectedChanged="OnSelectYearAsync"
                       OnFocusOut="async () => { await OnFocusOut.InvokeAsync(); }"
                       Theme="Theme"
            @bind-IsOpened="_isOpenedYearSelect">
                <OptionTemplate Context="year">
                    <div class="bch-year-wrapper">
                        <div class="year-item @(year.Number == _yearValue ? "current-year" : "")">
                            @year.Number
                        </div>
                    </div>
                </OptionTemplate>
            </BchSelect>
        </div>

        <div style="height: 100%; width: 100%;" @onclick="async () => { await OnFocusOut.InvokeAsync(); }"></div>
    </div>


    @* @if (_isOpenedYearSelect) *@
    @* { *@
    @*     <div class="shadow-opened-select"></div> *@
    @* } *@

    <div class="bch-list-of-month" @onclick="async () => { await OnFocusOut.InvokeAsync(); }">
        @foreach (var month in _month)
        {
            <label class="@(_monthValue == month.Number ? "current-month" : "")
                       @(SelectedMonth == month.Number ? "selected-month" : "")"
            @onclick="async () => { await OnSelectMonthAsync(month.Number); }">
                @month.Name
            </label>
        }
    </div>
</div>

<style>
    .bch-calendar-year-select { z-index: 999; }
    .bch-select-content-modal-wrapper.bch-calendar-year-select { transform: translate(-15px, 51px) !important; }

    /* Remove white bg/shadow from the trigger button (non-modal part), no hover */
    .bch-calendar-year-select-modal.bch-select-container { background: transparent !important; filter: none !important; border-radius: 0 !important; }
    .bch-calendar-year-select-modal.bch-select-container .bch-button { display: inline-flex; align-items: center; gap: 8px; border-radius: 5px; transition: background 0.2s ease; }
    .bch-calendar-year-select-modal.bch-select-container .bch-button:hover { background: transparent !important; }
    .bch-calendar-year-select-modal.bch-select-container .bch-button span { margin-left: 0 !important; }

    /* Base neutralization for modal content */
    .bch-calendar-year-select-modal .bch-content { border-top: none !important; border-radius: 0 !important; border-bottom-left-radius: 10px !important; filter: none !important; }
    .bch-calendar-year-select-modal .bch-content > .bch-scroller::-webkit-scrollbar { width: 5px; }
    .bch-calendar-year-select-modal .bch-content > .bch-scroller > .bch-group > .bch-option { padding: 0 !important; background: none; opacity: 1.0; justify-content: center; }
    .bch-calendar-year-select-modal .bch-content > .bch-scroller > .bch-group > .bch-option > .bch-year-wrapper { width: 100%; margin: 0; box-sizing: border-box; display: flex; justify-content: center; align-items: center; font-family: 'Roboto'; font-style: normal; font-weight: 400; font-size: 16px; line-height: 19px; }
    .bch-calendar-year-select-modal .bch-content > .bch-scroller > .bch-group > .bch-option > .bch-year-wrapper > .year-item { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
    .bch-calendar-year-select-modal .bch-content > .bch-scroller > .bch-group > .bch-option.selected,
    .bch-calendar-year-select-modal .bch-content > .bch-scroller > .bch-group > .bch-option:hover { background: none !important; padding: 0 !important; border: none !important; opacity: 1.0; }
    .bch-calendar-year-select-modal.bch-select-container .bch-button label { font-family: 'Roboto'; font-style: normal; font-weight: 500 !important; font-size: 18px !important; line-height: 32px; }
    .bch-calendar-year-select-modal.bch-select-container .bch-button span { transition: none !important; min-width: 14px !important; min-height: 12px !important; transform: none !important; margin-top: 2px; }

    /* Divider and themed rules remain unchanged (below) */
    /* LightGreen */
    .bch-calendar-year-select-modal .bch-content.bch-theme-light-green { background: #FEFEFE !important; border-right: 1px solid #E9ECEF !important; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light-green > .bch-scroller::-webkit-scrollbar-thumb { background: rgba(51,180,105,0.6); }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light-green > .bch-scroller::-webkit-scrollbar-thumb:hover { background: rgba(51,180,105,0.85); }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light-green > .bch-scroller > .bch-group > .bch-option > .bch-year-wrapper { color: #131212; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light-green > .bch-scroller > .bch-group > .bch-option:hover > .bch-year-wrapper { background: #E1F4E9; border-radius: 5px; color: #131212; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light-green > .bch-scroller > .bch-group > .bch-option.selected > .bch-year-wrapper { background: #33B469 !important; border-radius: 5px !important; color: #FFFFFF !important; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light-green > .bch-scroller > .bch-group > .bch-option > .bch-year-wrapper > .year-item.current-year { border: 1px solid #33B469; border-radius: 5px; }
    .bch-calendar-year-select-modal.bch-select-container.bch-theme-light-green .bch-button label { color: #131212 !important; }
    .bch-calendar-year-select-modal.bch-select-container.bch-theme-light-green .bch-button span { background: url("_content/Bch.Components.Calendar/img/arrow-top-bottom-icon-green.svg") center no-repeat !important; }

    /* Light */
    .bch-calendar-year-select-modal .bch-content.bch-theme-light { background: #FFFFFF !important; border-right: 1px solid #E9ECEF !important; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light > .bch-scroller::-webkit-scrollbar-thumb { background: #AFAFAF; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light > .bch-scroller::-webkit-scrollbar-thumb:hover { background: #9A9A9A; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light > .bch-scroller > .bch-group > .bch-option > .bch-year-wrapper { color: #212529; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light > .bch-scroller > .bch-group > .bch-option:hover > .bch-year-wrapper { background: #E9ECEF; border-radius: 5px; color: #212529; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light > .bch-scroller > .bch-group > .bch-option.selected > .bch-year-wrapper { background: #6C757D !important; color: #FFFFFF !important; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-light > .bch-scroller > .bch-group > .bch-option > .bch-year-wrapper > .year-item.current-year { border: 1px solid #6C757D; border-radius: 5px; }
    .bch-calendar-year-select-modal.bch-select-container.bch-theme-light .bch-button label { color: #212529 !important; }
    .bch-calendar-year-select-modal.bch-select-container.bch-theme-light .bch-button span { background: url("_content/Bch.Components.Calendar/img/arrow-top-bottom-icon-gray.svg") center no-repeat !important; }

    /* Dark */
    .bch-calendar-year-select-modal .bch-content.bch-theme-dark { background: #111827 !important; border-right: 1px solid #374151 !important; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-dark > .bch-scroller::-webkit-scrollbar-thumb { background: #6B7280; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-dark > .bch-scroller::-webkit-scrollbar-thumb:hover { background: #9CA3AF; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-dark > .bch-scroller > .bch-group > .bch-option > .bch-year-wrapper { color: #E5E7EB; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-dark > .bch-scroller > .bch-group > .bch-option:hover > .bch-year-wrapper { background: #374151; border-radius: 5px; color: #E5E7EB; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-dark > .bch-scroller > .bch-group > .bch-option.selected > .bch-year-wrapper { background: #4B5563 !important; color: #E5E7EB !important; }
    .bch-calendar-year-select-modal .bch-content.bch-theme-dark > .bch-scroller > .bch-group > .bch-option > .bch-year-wrapper > .year-item.current-year { border: 1px solid #9CA3AF; border-radius: 5px; }
    .bch-calendar-year-select-modal.bch-select-container.bch-theme-dark .bch-button label { color: #E5E7EB !important; }
    .bch-calendar-year-select-modal.bch-select-container.bch-theme-dark .bch-button span { background: url("_content/Bch.Components.Calendar/img/arrow-top-bottom-icon-white.svg") center no-repeat !important; }
</style>